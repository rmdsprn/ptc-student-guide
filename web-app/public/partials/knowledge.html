<!-- HEADER -->
<div class="d-flex justify-content-between align-items-center mb-3">
  <h1 class="h3 text-gray-800">Knowledge Base</h1>

  <button class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#knowledgeModal">
    <i class="fas fa-plus"></i> Add Knowledge
  </button>
</div>

<!-- TABLE -->
<table id="knowledgeTable" class="table table-bordered table-striped w-100">
  <thead>
    <tr>
      <th>Category</th>
      <th>Content</th>
      <th>Created At</th>
      <th style="width:120px;">Actions</th>
    </tr>
  </thead>
  <tbody></tbody>
</table>

<!-- ADD / EDIT MODAL -->
<div class="modal fade" id="knowledgeModal" tabindex="-1">
  <div class="modal-dialog modal-lg modal-dialog-centered">
    <div class="modal-content">

      <!-- MODAL HEADER -->
      <div class="modal-header">
        <h5 class="modal-title" id="modalTitle">Add Knowledge</h5>
        <button class="btn-close" data-bs-dismiss="modal"></button>
      </div>

      <!-- MODAL BODY -->
      <div class="modal-body">
        <input type="hidden" id="knowledgeId">

        <!-- CATEGORY -->
        <div class="mb-3">
          <label class="form-label fw-bold">Category</label>
          <select id="categoryInput" class="form-select">
            <!-- populated dynamically -->
          </select>
        </div>

        <!-- CONTENT -->
        <div class="mb-3">
          <label class="form-label fw-bold">Content</label>
          <textarea id="contentInput" class="form-control" rows="4"
            placeholder="Enter the knowledge content here..."></textarea>
        </div>

        <!-- AI SUGGESTION / APPROVAL BOX -->
        <div id="aiSuggestionBox" class="alert alert-info mt-3 d-none">
          <span id="adminApprovalBadge" class="badge bg-warning text-dark ms-2 d-none">Admin Approval Required</span>
          <!-- AI DETAILS -->
          <div id="aiSuggestionContent"></div>
          

          <!-- APPROVAL ACTIONS -->
          <div id="aiApprovalActions" class="mt-3 d-flex gap-2 d-none">

            <!-- Apply keywords (existing intent) -->
            <button id="applyKeywordsBtn" class="btn btn-sm btn-success">
              <i class="fas fa-check"></i>
              Apply Keywords to Existing Intent
            </button>

            <!-- Create new intent (superadmin only) -->
            <button id="createIntentBtn" class="btn btn-sm btn-warning">
              <i class="fas fa-plus-circle"></i>
              Create New Category
            </button>
          </div>

        </div>
      </div>

      <!-- MODAL FOOTER -->
      <div class="modal-footer d-flex justify-content-between">
        <!-- AI BUTTON -->
        <button id="aiSuggestBtn" class="btn btn-outline-info">
          <i class="fas fa-magic"></i> AI Suggest Category
        </button>

        <!-- SAVE / CANCEL -->
        <div>
          <button class="btn btn-secondary" data-bs-dismiss="modal">
            Cancel
          </button>

          <button id="saveKnowledgeBtn" class="btn btn-primary">
            Save
          </button>
        </div>
      </div>

    </div>
  </div>
</div>